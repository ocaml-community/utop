<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>UTop (utop.UTop)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">utop</a> &#x00BB; UTop</nav><header class="odoc-preamble"><h1>Module <code><span>UTop</span></code></h1><p>UTop configuration.</p></header><nav class="odoc-toc"><ul><li><a href="#history">History</a></li><li><a href="#console-specific-configuration">Console specific configuration</a></li><li><a href="#edit-mode-configuration">Edit mode configuration</a></li><li><a href="#hooks">Hooks</a></li><li><a href="#parsing">Parsing</a></li><li><a href="#helpers">Helpers</a></li><li><a href="#compiler-libs-reexports">compiler-libs reexports</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-version"><a href="#val-version" class="anchor"></a><code><span><span class="keyword">val</span> version : string</span></code></div><div class="spec-doc"><p>Version of utop.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-count"><a href="#val-count" class="anchor"></a><code><span><span class="keyword">val</span> count : <span>int <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>The number of commands already executed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-keywords"><a href="#val-keywords" class="anchor"></a><code><span><span class="keyword">val</span> keywords : <span><span class="xref-unresolved">Stdlib</span>.Set.Make(<span class="xref-unresolved">Stdlib</span>.String).t <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>The set of OCaml keywords.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_keyword"><a href="#val-add_keyword" class="anchor"></a><code><span><span class="keyword">val</span> add_keyword : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Add a new OCaml keyword.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-require"><a href="#val-require" class="anchor"></a><code><span><span class="keyword">val</span> require : <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Load all the given findlib packages</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ui"><a href="#type-ui" class="anchor"></a><code><span><span class="keyword">type</span> ui</span><span> = </span></code><ol><li id="type-ui.Console" class="def variant constructor anchored"><a href="#type-ui.Console" class="anchor"></a><code><span>| </span><span><span class="constructor">Console</span></span></code></li><li id="type-ui.Emacs" class="def variant constructor anchored"><a href="#type-ui.Emacs" class="anchor"></a><code><span>| </span><span><span class="constructor">Emacs</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The user interface in use.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_ui"><a href="#val-get_ui" class="anchor"></a><code><span><span class="keyword">val</span> get_ui : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-ui">ui</a></span></code></div><div class="spec-doc"><p>Returns the user interface in use.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hide_reserved"><a href="#val-hide_reserved" class="anchor"></a><code><span><span class="keyword">val</span> hide_reserved : <span>bool <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>If <code>true</code> (the default) identifiers starting with a '_' will be hidden from the output. i.e. the following phrase won't produces any output:</p><pre class="language-ocaml"><code>let _x = 1</code></pre><p>This is for hidding variables created by code generators for internal use. It can also be set/unset by the command line options <code>-hide-reserved</code> and <code>-show-reserved</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_hide_reserved"><a href="#val-get_hide_reserved" class="anchor"></a><code><span><span class="keyword">val</span> get_hide_reserved : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns the value of <a href="#val-hide_reserved"><code>hide_reserved</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_hide_reserved"><a href="#val-set_hide_reserved" class="anchor"></a><code><span><span class="keyword">val</span> set_hide_reserved : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Modifies <a href="#val-hide_reserved"><code>hide_reserved</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_implicits"><a href="#val-create_implicits" class="anchor"></a><code><span><span class="keyword">val</span> create_implicits : <span>bool <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>If <code>true</code> (not the default) expressions entered in the toplevel are automatically bound, for example:</p><pre class="language-ocaml"><code># 3 + 4;;
_0 : int = 7
# _0 + 10;;
_1 : int = 17</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_create_implicits"><a href="#val-get_create_implicits" class="anchor"></a><code><span><span class="keyword">val</span> get_create_implicits : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns the value of <a href="#val-create_implicits"><code>create_implicits</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_create_implicits"><a href="#val-set_create_implicits" class="anchor"></a><code><span><span class="keyword">val</span> set_create_implicits : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Modifies <a href="#val-create_implicits"><code>create_implicits</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-topfind_verbose"><a href="#val-topfind_verbose" class="anchor"></a><code><span><span class="keyword">val</span> topfind_verbose : <span>bool <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>If <code>false</code> (the default) messages from findlib are hidden. This is only effective with findlib &gt;= 1.4.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_topfind_verbose"><a href="#val-get_topfind_verbose" class="anchor"></a><code><span><span class="keyword">val</span> get_topfind_verbose : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns the value of <a href="#val-topfind_verbose"><code>topfind_verbose</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_topfind_verbose"><a href="#val-set_topfind_verbose" class="anchor"></a><code><span><span class="keyword">val</span> set_topfind_verbose : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Modifies <a href="#val-topfind_verbose"><code>topfind_verbose</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-topfind_log"><a href="#val-topfind_log" class="anchor"></a><code><span><span class="keyword">val</span> topfind_log : <span><span>string list</span> <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>List of messages logged by findlib since the beginning of the session. This requires findlib &gt;= 1.4.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_box"><a href="#val-show_box" class="anchor"></a><code><span><span class="keyword">val</span> show_box : <span>bool <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>If <code>true</code> (the default) the completion bar is displayed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_show_box"><a href="#val-get_show_box" class="anchor"></a><code><span><span class="keyword">val</span> get_show_box : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns the value of <a href="#val-show_box"><code>show_box</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_show_box"><a href="#val-set_show_box" class="anchor"></a><code><span><span class="keyword">val</span> set_show_box : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Modifies <a href="#val-show_box"><code>show_box</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_margin_function"><a href="#val-set_margin_function" class="anchor"></a><code><span><span class="keyword">val</span> set_margin_function : <span><span>(<span><span class="xref-unresolved">LTerm_geom</span>.size <span class="arrow">&#45;&gt;</span></span> <span>int option</span>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Margin of the standard and error formatters as a function of the screen size.</p><p>The default is:</p><pre class="language-ocaml"><code>fun size -&gt; Some (min 80 size.cols)</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-phrase_terminator"><a href="#val-phrase_terminator" class="anchor"></a><code><span><span class="keyword">val</span> phrase_terminator : <span>string <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>The phrase terminator, &quot;;;&quot;.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_phrase_terminator"><a href="#val-get_phrase_terminator" class="anchor"></a><code><span><span class="keyword">val</span> get_phrase_terminator : <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the value of <a href="#val-phrase_terminator"><code>phrase_terminator</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_phrase_terminator"><a href="#val-set_phrase_terminator" class="anchor"></a><code><span><span class="keyword">val</span> set_phrase_terminator : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Modifies <a href="#val-phrase_terminator"><code>phrase_terminator</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-auto_run_lwt"><a href="#val-auto_run_lwt" class="anchor"></a><code><span><span class="keyword">val</span> auto_run_lwt : <span>bool <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>If <code>true</code> (the default) toplevel lwt expressions are automatically run with <code>Lwt_main.run</code>. i.e. if you type:</p><pre class="language-ocaml"><code>Lwt_io.printl &quot;Hello, world&quot;</code></pre><p>this will be replaced by:</p><pre class="language-ocaml"><code>Lwt_main.run (Lwt_io.printl &quot;Hello, world&quot;)</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_auto_run_lwt"><a href="#val-get_auto_run_lwt" class="anchor"></a><code><span><span class="keyword">val</span> get_auto_run_lwt : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns the value of <a href="#val-auto_run_lwt"><code>auto_run_lwt</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_auto_run_lwt"><a href="#val-set_auto_run_lwt" class="anchor"></a><code><span><span class="keyword">val</span> set_auto_run_lwt : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Modifies <a href="#val-auto_run_lwt"><code>auto_run_lwt</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-auto_run_async"><a href="#val-auto_run_async" class="anchor"></a><code><span><span class="keyword">val</span> auto_run_async : <span>bool <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>If <code>true</code> (the default) toplevel Async expressions are automatically run with in a separate thread with <code>Thread_safe.block_on_async_exn</code>. i.e. if you type:</p><pre class="language-ocaml"><code>after (Time.Span.of_s 1.0)</code></pre><p>this will be replaced by:</p><pre class="language-ocaml"><code>Thread_safe.block_on_async_exn (fun () -&gt; after (Time.Span.of_s 1.0))</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_auto_run_async"><a href="#val-get_auto_run_async" class="anchor"></a><code><span><span class="keyword">val</span> get_auto_run_async : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns the value of <a href="#val-auto_run_async"><code>auto_run_async</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_auto_run_async"><a href="#val-set_auto_run_async" class="anchor"></a><code><span><span class="keyword">val</span> set_auto_run_async : <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Modifies <a href="#val-auto_run_async"><code>auto_run_async</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-end_and_accept_current_phrase"><a href="#val-end_and_accept_current_phrase" class="anchor"></a><code><span><span class="keyword">val</span> end_and_accept_current_phrase : <span class="xref-unresolved">LTerm_read_line</span>.action</span></code></div><div class="spec-doc"><p>Action that add the phrase terminator at the end of the current phrase and accepts it. For instance to avoid typing <code>;;</code>, add this to your ~/.config/utop/init.ml:</p><pre class="language-ocaml"><code>#require &quot;lambda-term&quot;;;
LTerm_read_line.bind
  [ { control = false; meta = false; shift = false; code = Enter } ]
  [ UTop.end_and_accept_current_phrase ]</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-external_editor"><a href="#val-external_editor" class="anchor"></a><code><span><span class="keyword">val</span> external_editor : <span>string <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>External editor command. <code>None</code> for default.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_external_editor"><a href="#val-set_external_editor" class="anchor"></a><code><span><span class="keyword">val</span> set_external_editor : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_external_editor"><a href="#val-get_external_editor" class="anchor"></a><code><span><span class="keyword">val</span> get_external_editor : <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h6 id="history"><a href="#history" class="anchor"></a>History</h6><div class="odoc-spec"><div class="spec value anchored" id="val-history"><a href="#val-history" class="anchor"></a><code><span><span class="keyword">val</span> history : <span class="xref-unresolved">LTerm_history</span>.t</span></code></div><div class="spec-doc"><p>The history used by utop. You can configure limits using the <code>LTerm_history</code> module.</p><p>For example if you want to limit the history to 1000 line, add these lines to your ~/.config/utop/init.ml file:</p><pre class="language-ocaml"><code>#require &quot;lambda-term&quot;;;
LTerm_history.set_max_entries UTop.history 1000;;</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-history_file_name"><a href="#val-history_file_name" class="anchor"></a><code><span><span class="keyword">val</span> history_file_name : <span><span>string option</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Name of the history file. If <code>None</code>, no history will be loaded or saved.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-history_file_max_size"><a href="#val-history_file_max_size" class="anchor"></a><code><span><span class="keyword">val</span> history_file_max_size : <span><span>int option</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Maximum size of the history file. If <code>None</code> (the default) the maximum size of <code>history</code> will be used.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-history_file_max_entries"><a href="#val-history_file_max_entries" class="anchor"></a><code><span><span class="keyword">val</span> history_file_max_entries : <span><span>int option</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Maximum entries to store in the history file. If <code>None</code> (the default) the maximum number of entries if <code>history</code> will be used.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stashable_session_history"><a href="#val-stashable_session_history" class="anchor"></a><code><span><span class="keyword">val</span> stashable_session_history : <a href="../UTop_history/index.html#type-t">UTop_history.t</a></span></code></div><div class="spec-doc"><p>A history consisting of inputs and resulting values or errors of the current session. Because stashing is supposed to produce a valid OCaml file which will behave roughly the same as the console, it is best if this history never gets truncated. While this will certainly lead to a slight memory leaking problem, UTop sessions are rarely long enough to make it a serious issue.</p></div></div><h6 id="console-specific-configuration"><a href="#console-specific-configuration" class="anchor"></a>Console specific configuration</h6><div class="odoc-spec"><div class="spec type anchored" id="type-profile"><a href="#type-profile" class="anchor"></a><code><span><span class="keyword">type</span> profile</span><span> = </span></code><ol><li id="type-profile.Dark" class="def variant constructor anchored"><a href="#type-profile.Dark" class="anchor"></a><code><span>| </span><span><span class="constructor">Dark</span></span></code></li><li id="type-profile.Light" class="def variant constructor anchored"><a href="#type-profile.Light" class="anchor"></a><code><span>| </span><span><span class="constructor">Light</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Profile for colors.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-profile"><a href="#val-profile" class="anchor"></a><code><span><span class="keyword">val</span> profile : <span><a href="#type-profile">profile</a> <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>The color profile. It defaults to <a href="#type-profile.Dark"><code>Dark</code></a>. This is used by the default prompt to choose colors.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_profile"><a href="#val-set_profile" class="anchor"></a><code><span><span class="keyword">val</span> set_profile : <span><a href="#type-profile">profile</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Sets the color profile.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-size"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span><span class="xref-unresolved">LTerm_geom</span>.size <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>The current size of the terminal. This is used only in the console UI.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-key_sequence"><a href="#val-key_sequence" class="anchor"></a><code><span><span class="keyword">val</span> key_sequence : <span><span><span class="xref-unresolved">LTerm_key</span>.t list</span> <span class="xref-unresolved">React</span>.signal</span></span></code></div><div class="spec-doc"><p>The current key sequence entered by the user. This is used only in the console UI.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-time"><a href="#val-time" class="anchor"></a><code><span><span class="keyword">val</span> time : <span>float <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>The time of the beginning of the current command.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prompt"><a href="#val-prompt" class="anchor"></a><code><span><span class="keyword">val</span> prompt : <span><span><span class="xref-unresolved">LTerm_text</span>.t <span class="xref-unresolved">React</span>.signal</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>The prompt.</p></div></div><h6 id="edit-mode-configuration"><a href="#edit-mode-configuration" class="anchor"></a>Edit mode configuration</h6><div class="odoc-spec"><div class="spec value anchored" id="val-edit_mode"><a href="#val-edit_mode" class="anchor"></a><code><span><span class="keyword">val</span> edit_mode : <span><span class="xref-unresolved">LTerm_editor</span>.mode <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>The edit mode.</p></div></div><h6 id="hooks"><a href="#hooks" class="anchor"></a>Hooks</h6><div class="odoc-spec"><div class="spec value anchored" id="val-new_command_hooks"><a href="#val-new_command_hooks" class="anchor"></a><code><span><span class="keyword">val</span> new_command_hooks : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="xref-unresolved">LTerm_dlist</span>.t</span></span></code></div><div class="spec-doc"><p>Functions called before each new command.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-at_new_command"><a href="#val-at_new_command" class="anchor"></a><code><span><span class="keyword">val</span> at_new_command : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>at_new_command f</code> adds <code>f</code> to the hooks executed before each new commands.</p></div></div><h6 id="parsing"><a href="#parsing" class="anchor"></a>Parsing</h6><div class="odoc-spec"><div class="spec type anchored" id="type-location"><a href="#type-location" class="anchor"></a><code><span><span class="keyword">type</span> location</span><span> = int * int</span></code></div><div class="spec-doc"><p>Type of a string-location. It is composed of a start and stop offsets (in bytes).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-lines"><a href="#type-lines" class="anchor"></a><code><span><span class="keyword">type</span> lines</span><span> = </span><span>{</span></code><ol><li id="type-lines.start" class="def record field anchored"><a href="#type-lines.start" class="anchor"></a><code><span>start : int;</span></code></li><li id="type-lines.stop" class="def record field anchored"><a href="#type-lines.stop" class="anchor"></a><code><span>stop : int;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Type for a range of lines in a buffer from start to stop.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-result"><a href="#type-result" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a result</span></span><span> = </span></code><ol><li id="type-result.Value" class="def variant constructor anchored"><a href="#type-result.Value" class="anchor"></a><code><span>| </span><span><span class="constructor">Value</span> <span class="keyword">of</span> <span class="type-var">'a</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The function succeeded and returned this value.</p><span class="comment-delim">*)</span></div></li><li id="type-result.Error" class="def variant constructor anchored"><a href="#type-result.Error" class="anchor"></a><code><span>| </span><span><span class="constructor">Error</span> <span class="keyword">of</span> <span><a href="#type-location">location</a> list</span> * string</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The function failed. Arguments are a list of locations to highlight in the source and an error message.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Result of a function processing a programx.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Need_more"><a href="#exception-Need_more" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Need_more</span></span></code></div><div class="spec-doc"><p>Exception raised by a parser when it need more data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_use_file"><a href="#val-parse_use_file" class="anchor"></a><code><span><span class="keyword">val</span> parse_use_file : 
  <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span><span class="xref-unresolved">Parsetree</span>.toplevel_phrase list</span> <a href="#type-result">result</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_use_file_default"><a href="#val-parse_use_file_default" class="anchor"></a><code><span><span class="keyword">val</span> parse_use_file_default : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Parsetree</span>.toplevel_phrase list</span> <a href="#type-result">result</a></span></span></code></div><div class="spec-doc"><p>The default parser for toplevel regions. It uses the standard ocaml parser.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_toplevel_phrase"><a href="#val-parse_toplevel_phrase" class="anchor"></a><code><span><span class="keyword">val</span> parse_toplevel_phrase : 
  <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Parsetree</span>.toplevel_phrase <a href="#type-result">result</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p><code>parse_toplevel_phrase</code> is the function used to parse a phrase typed in the toplevel.</p><p>Its arguments are:</p><ul><li><code>input</code>: the string to parse</li><li><code>eos_is_error</code></li></ul><p>If <code>eos_is_error</code> is <code>true</code> and the parser reach the end of input, then <code>Parse_failure</code> should be returned.</p><p>If <code>eos_is_error</code> is <code>false</code> and the parser reach the end of input, the exception <a href="#exception-Need_more"><code>Need_more</code></a> must be thrown.</p><p>Except for <a href="#exception-Need_more"><code>Need_more</code></a>, the function must not raise any exception.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_toplevel_phrase_default"><a href="#val-parse_toplevel_phrase_default" class="anchor"></a><code><span><span class="keyword">val</span> parse_toplevel_phrase_default : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Parsetree</span>.toplevel_phrase <a href="#type-result">result</a></span></span></code></div><div class="spec-doc"><p>The default parser for toplevel phrases. It uses the standard ocaml parser.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_default"><a href="#val-parse_default" class="anchor"></a><code><span><span class="keyword">val</span> parse_default : <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-result">result</a></span></span></code></div><div class="spec-doc"><p>The default parser. It uses the standard ocaml parser.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-input_name"><a href="#val-input_name" class="anchor"></a><code><span><span class="keyword">val</span> input_name : string</span></code></div><div class="spec-doc"><p>The name you must use in location to let ocaml know that it is from the toplevel.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lexbuf_of_string"><a href="#val-lexbuf_of_string" class="anchor"></a><code><span><span class="keyword">val</span> lexbuf_of_string : <span><span>bool <span class="xref-unresolved">Stdlib</span>.ref</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf</span></code></div><div class="spec-doc"><p><code>lexbuf_of_string eof str</code> is the same as <code>Lexing.from_string
      str</code> except that if the lexer reach the end of <code>str</code> then <code>eof</code> is set to <code>true</code>.</p></div></div><h6 id="helpers"><a href="#helpers" class="anchor"></a>Helpers</h6><div class="odoc-spec"><div class="spec value anchored" id="val-get_message"><a href="#val-get_message" class="anchor"></a><code><span><span class="keyword">val</span> get_message : <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>get_message printer x</code> applies <code>printer</code> on <code>x</code> and returns everything it prints as a string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_ocaml_error_message"><a href="#val-get_ocaml_error_message" class="anchor"></a><code><span><span class="keyword">val</span> get_ocaml_error_message : <span>exn <span class="arrow">&#45;&gt;</span></span> <a href="#type-location">location</a> * string * <span><a href="#type-lines">lines</a> option</span></span></code></div><div class="spec-doc"><p><code>get_ocaml_error_message exn</code> returns the location and error message for the exception <code>exn</code> which must be an exception from the compiler.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_phrase"><a href="#val-check_phrase" class="anchor"></a><code><span><span class="keyword">val</span> check_phrase : 
  <span><span class="xref-unresolved">Parsetree</span>.toplevel_phrase <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-location">location</a> list</span> * string * <span><span><a href="#type-lines">lines</a> option</span> list</span>)</span> option</span></span></code></div><div class="spec-doc"><p><code>check_phrase phrase</code> checks that <code>phrase</code> can be executed without typing or compilation errors. It returns <code>None</code> if <code>phrase</code> is OK and an error message otherwise.</p><p>If the result is <code>None</code> it is guaranteed that <code>Toploop.execute_phrase</code> won't raise any exception.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-collect_formatters"><a href="#val-collect_formatters" class="anchor"></a><code><span><span class="keyword">val</span> collect_formatters : 
  <span><span class="xref-unresolved">Stdlib</span>.Buffer.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Stdlib</span>.Format.formatter list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>collect_formatters buf pps f</code> executes <code>f</code> and redirect everything it prints on <code>pps</code> to <code>buf</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-discard_formatters"><a href="#val-discard_formatters" class="anchor"></a><code><span><span class="keyword">val</span> discard_formatters : <span><span><span class="xref-unresolved">Stdlib</span>.Format.formatter list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>discard_formatters pps f</code> executes <code>f</code>, dropping everything it prints on <code>pps</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-split_words"><a href="#val-split_words" class="anchor"></a><code><span><span class="keyword">val</span> split_words : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div></div><h6 id="compiler-libs-reexports"><a href="#compiler-libs-reexports" class="anchor"></a>compiler-libs reexports</h6><div class="odoc-spec"><div class="spec value anchored" id="val-get_load_path"><a href="#val-get_load_path" class="anchor"></a><code><span><span class="keyword">val</span> get_load_path : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_load_path"><a href="#val-set_load_path" class="anchor"></a><code><span><span class="keyword">val</span> set_load_path : <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>get_load_path</code> and <code>set_load_path</code> manage the include directories.</p><p>The internal variable contains the list of directories added by findlib-required packages and <code>#directory</code> directives.</p></div></div></div></body></html>